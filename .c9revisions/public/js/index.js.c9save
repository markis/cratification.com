{"ts":1343883725596,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"$(function() {\r\n    AddNewRow();\r\n    $(\"<button />\").html(\"Test\").appendTo($(\"#entry-form\")).click(TestData);\r\n    $(\"<button />\").html(\"Save\").appendTo($(\"#entry-form\")).click(SaveData);\r\n    var $container = $(\"#test-container\");\r\n    var $ampersand = $(\"#ampersand\");\r\n    var data = [\r\n      {\r\n        \"left\": {\r\n          \"text\": \"Crate\",\r\n          \"animationIn\": \"flyInLeft\",\r\n          \"animationOut\": \"flyOutLeft\"\r\n        },\r\n        \"right\": {\r\n          \"text\": \"Barrel\",\r\n          \"animationIn\": \"flyInUp\",\r\n          \"animationOut\": \"flyOutLeft\"\r\n        }\r\n      },\r\n      {\r\n        \"left\": {\r\n          \"text\": \"Create your\",\r\n          \"animationIn\": \"flyInUp\",\r\n          \"animationOut\": \"stop\"\r\n        },\r\n        \"right\": {\r\n          \"text\": \"own story\",\r\n          \"animationIn\": \"flyInRight\",\r\n          \"animationOut\": \"stop\"\r\n        }\r\n      }\r\n    ];\r\n    new Cratify(data, $container, $ampersand);\r\n});\r\n\r\nfunction AddNewRow(event) {\r\n    var row = $(\"<div />\").addClass(\"frame\");   \r\n    if (event) {\r\n        row.insertAfter($(event.target).closest(\".frame\"));\r\n    } else {\r\n        row.appendTo($(\"#entry\"));\r\n    }\r\n    \r\n    var leftSide = $(\"<div />\").addClass(\"left\").addClass(\"side\").appendTo(row);\r\n    var leftoptions = $(\"<div />\").addClass(\"left\").addClass(\"options\").appendTo(row);\r\n    CreateInDropDown().addClass(\"left\").appendTo(leftoptions);\r\n    CreateOutDropDown().addClass(\"left\").appendTo(leftoptions);\r\n    $(\"<input />\").attr({type:\"text\"}).addClass(\"left\").appendTo(leftSide);\r\n\r\n    \r\n    $(\"<span />\").addClass(\"ampersand\").html(\"&amp;\").appendTo(row);\r\n    \r\n    var rightSide = $(\"<div />\").addClass(\"right\").addClass(\"side\").appendTo(row);\r\n    $(\"<input />\").attr({type:\"text\"}).addClass(\"right\").appendTo(rightSide);\r\n    var rightoptions = $(\"<div />\").addClass(\"right\").addClass(\"options\").appendTo(row);\r\n    CreateInDropDown().addClass(\"right\").appendTo(rightoptions);\r\n    CreateOutDropDown().addClass(\"right\").appendTo(rightoptions);\r\n    \r\n    $(\"<div />\").css({clear:\"both\"}).appendTo(row);\r\n    $(\"<button />\").html(\"New Frame\").addClass(\"addRow\").click(AddNewRow).appendTo(row);\r\n    if (event) {\r\n        $(\"<button />\").html(\"Remove Frame\").addClass(\"removeRow\").click(RemoveRow).appendTo(row);\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction AddNewRowByButton(event) {\r\n    $(event.target).parent()[0].removeChild(event.target);\r\n    AddNewRow();\r\n}\r\n\r\nfunction RemoveRow(event) {\r\n    var row = $(event.target).closest(\".frame\");\r\n    row.parent()[0].removeChild(row[0]);\r\n    return false;\r\n}\r\n\r\nfunction CreateInDropDown() {\r\n    var $dropDown = $(\"<select />\").addClass(\"animationIn\");\r\n    for (animation in Animations.prototype[\"in\"])\r\n    {\r\n        $dropDown.append(new Option(animation, animation, false, false));\r\n    }\r\n    return $dropDown;\r\n}\r\nfunction CreateOutDropDown() {\r\n    var $dropDown = $(\"<select />\").addClass(\"animationOut\");\r\n    for (animation in Animations.prototype[\"out\"])\r\n    {\r\n        $dropDown.append(new Option(animation, animation, false, false));\r\n    }\r\n    return $dropDown;\r\n}\r\n\r\nfunction GetData() {\r\n    var data = [];\r\n    $(\"#entry > div\").each(function (idx, elem) { \r\n        var $elem = $(elem); \r\n        var leftText = $elem.find(\"input.left\").val();\r\n        var leftAnimationIn = $elem.find(\"select.animationIn.left\").val();\r\n        var leftAnimationOut = $elem.find(\"select.animationOut.left\").val();\r\n        \r\n        var rightText = $elem.find(\"input.right\").val();\r\n        var rightAnimationIn = $elem.find(\"select.animationIn.right\").val();\r\n        var rightAnimationOut = $elem.find(\"select.animationOut.right\").val();\r\n        \r\n        data.push({\r\n            \"left\": {\r\n              \"text\": leftText,\r\n              \"animationIn\": leftAnimationIn,\r\n              \"animationOut\": leftAnimationOut\r\n            },\r\n            \"right\": {\r\n              \"text\": rightText,\r\n              \"animationIn\": rightAnimationIn,\r\n              \"animationOut\": rightAnimationOut\r\n            }  \r\n        });\r\n    });\r\n    return data;\r\n}\r\n\r\nfunction SaveData() {\r\n    var data = GetData();\r\n    $.ajax({\r\n        type: 'POST',\r\n        url:'/animation',\r\n        data: {animations:data},\r\n        dataType:'json',\r\n        success: SaveDataComplete\r\n    });\r\n    return false;\r\n}\r\n\r\nfunction SaveDataComplete(data) {\r\n   if (data.success)  \r\n        window.location='/view/'+data.id;  \r\n}\r\n\r\nfunction TestData() {\r\n    var data = GetData();\r\n    var $container = $(\"#test-container\");\r\n    var $ampersand = $(\"#ampersand\");\r\n    new Cratify(data, $container, $ampersand);\r\n    return false;\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":4620}]],"length":4620}
{"contributors":[],"silentsave":false,"ts":1343883748041,"patch":[[{"diffs":[[0,").html(\""],[-1,"Sav"],[1,"Create & Shar"],[0,"e\").appe"]],"start1":130,"start2":130,"length1":19,"length2":29}]],"length":4630,"saved":false}
